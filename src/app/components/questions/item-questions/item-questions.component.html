<div class="row budgetkey-item-questions-wrapper">
  <div class="col-xs-1">
    <div class='download-data'>
      הורדת<br/>
      נתונים
    </div>
  </div>
  <div class="col-xs-8">
    <div class="budgetkey-item-questions" [ngClass]="{expanded: isDropDownVisible}">
      <div class="questions">
        <div *ngFor="let question of preparedQuestions" class="item-questions-fragments-wrapper"
          [ngClass]="{active: question==currentQuestion}"
          (click)="selectQuestion(question)">
          <ng-container *ngIf='question==currentQuestion'>
            <ng-container *ngFor="let fragment of currentQuestion.parsed">
              <span *ngIf="fragment.isText" (click)="toggleDropDown()"
                    [innerHtml]="fragment.value"></span>
              <budgetkey-item-questions-parameter *ngIf="fragment.isParameter"
                [value]="currentParameters[fragment.name]"
                [values]="fragment.values | keys"
                (change)="setParameter(fragment.name, $event)"
              ></budgetkey-item-questions-parameter>
            </ng-container>
            &nbsp;<i *ngIf="isSearching" class="fa fa-circle-o-notch fa-spin"></i>
            <div #btnToggleItemQuest class="toggle" (click)="toggleDropDown()">
              <i class="glyphicon glyphicon-chevron-left"></i>
            </div>
          </ng-container>
          <ng-container *ngIf='question!=currentQuestion'>
            <ng-container *ngFor="let fragment of question.parsed">
              <span *ngIf="fragment.isText"
                    [innerHtml]="fragment.value"></span>
              <span class="item-questions-parameter value" *ngIf="fragment.isParameter">{{ fragment.value }}</span>
            </ng-container>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
  <div class="col-xs-2 item-questions-actions">
    <a [href]="downloadUrl" title="הורדת טבלה" target="_blank">
      <svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1"
        viewBox="0 0 24 32" width="20" height="25">
        <svg:path class="filled" d="m 13.126828,0.5939288 0.002,0.00195 -10.4980469,0 c -1.106,0
              -2.0019531,0.8968594 -2.0019531,2.0058594 l 0,22.9843758 c 0,1.108 0.8890938,2.007812
              1.9960938,2.007812 l 12.6230472,0 c -0.0026,-0.05759 -0.01758,-0.111685 -0.01758,-0.169922
              0,-0.286942 0.03855,-0.563512 0.09961,-0.832031 l -12.7031711,3e-6 c -0.545,0 -1,-0.444141
              -1,-0.994141 l 0,-23.0097656 c 0,-0.54 0.4460937,-0.9941406 0.9960938,-0.9941406 l
              10.0039063,0 0,4.9921875 c 0,1.1189995 0.895047,2.0058595 1.998047,2.0058595 l 4.001953,0
              0,15.1152342 c 0.11881,-0.01135 0.233696,-0.03516 0.355469,-0.03516 0.220821,0
              0.434152,0.02783 0.644531,0.06445 l 0,-16.1425712 -6,-7 -0.5,0 z m 0.5,1.5 4.699219,5.5
              -3.703125,0 c -0.546,0 -0.996094,-0.4527656 -0.996094,-1.0097656 l 0,-4.4902344 z m
              -9.0000001,8.4999992 0,14.000001 11.0000001,0 0,-14.000001 -11.0000001,0 z m 1,2.000001
              4.0000002,0 0,2 -4.0000002,0 0,-2 z m 5.0000001,0 4,0 0,2 -4,0 0,-2 z m -5.0000001,3 4.0000002,
              0 0,2 -4.0000002,0 0,-2 z m 5.0000001,0 4,0 0,2 -4,0 0,-2 z m -5.0000001,3 4.0000002,0 0,2
              -4.0000002,0 0,-2 z m 5.0000001,0 4,0 0,2 -4,0 0,-2 z m -5.0000001,3 4.0000002,0 0,2
              -4.0000002,0 0,-2 z m 5.0000001,0 4,0 0,2 -4,0 0,-2 z"/>
        <svg:path class="stroked" d="m 21.639621,27.146059 c 0,-0.08319 -0.0294,-0.161372 -0.08788,-0.219854
              l -0.444708,-0.444708 c -0.05848,-0.05848 -0.136977,-0.08788 -0.219852,-0.08788 -0.08288,0
              -0.161371,0.0294 -0.219853,0.08788 l -0.923506,0.923506 0,-2.453093 c 0,-0.171065
              -0.141669,-0.312735 -0.312735,-0.312735 l -0.62547,0 c -0.171065,0 -0.312735,0.14167
              -0.312735,0.312735 l 0,2.453093 -0.923506,-0.923507 c -0.05848,-0.05848 -0.136978,-0.09288
              -0.219852,-0.09288 -0.08288,0 -0.161372,0.03409 -0.219853,0.09288 l -0.444709,0.444709
              c -0.05848,0.05848 -0.08788,0.136979 -0.08788,0.219853 0,0.08288 0.0294,0.161371
              0.08788,0.219852 l 2.213538,2.213538 c 0.05848,0.05848 0.136978,0.08788 0.219852,0.08788
              0.08288,0 0.161371,-0.0294 0.219853,-0.08788 l 2.213537,-2.213538 c 0.05848,-0.05848
              0.08788,-0.136977 0.08788,-0.219852 z"/>
        <svg:path class="stroked" d="m 22.871172,27.153251 c 0,2.071869 -1.680951,3.75282
              -3.75282,3.75282 -2.071869,0 -3.752819,-1.680951 -3.752819,-3.75282 0,-2.071869
              1.68095,-3.752819 3.752819,-3.752819 2.071869,0 3.75282,1.68095 3.75282,3.752819 z"/>
        <text y="11" style="stroke:black;font-size:16;stroke-width:2;fill:#000" x="24">CSV</text>
      </svg>
    </a>
    <a [href]="downloadUrlXlsx" title="הורדת אקסל" target="_blank">
      <svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1"
        viewBox="0 0 24 32" width="20" height="25">
        <svg:path class="filled" d="m 13.126828,0.5939288 0.002,0.00195 -10.4980469,0 c -1.106,0
              -2.0019531,0.8968594 -2.0019531,2.0058594 l 0,22.9843758 c 0,1.108 0.8890938,2.007812
              1.9960938,2.007812 l 12.6230472,0 c -0.0026,-0.05759 -0.01758,-0.111685 -0.01758,-0.169922
              0,-0.286942 0.03855,-0.563512 0.09961,-0.832031 l -12.7031711,3e-6 c -0.545,0 -1,-0.444141
              -1,-0.994141 l 0,-23.0097656 c 0,-0.54 0.4460937,-0.9941406 0.9960938,-0.9941406 l
              10.0039063,0 0,4.9921875 c 0,1.1189995 0.895047,2.0058595 1.998047,2.0058595 l 4.001953,0
              0,15.1152342 c 0.11881,-0.01135 0.233696,-0.03516 0.355469,-0.03516 0.220821,0
              0.434152,0.02783 0.644531,0.06445 l 0,-16.1425712 -6,-7 -0.5,0 z m 0.5,1.5 4.699219,5.5
              -3.703125,0 c -0.546,0 -0.996094,-0.4527656 -0.996094,-1.0097656 l 0,-4.4902344 z m
              -9.0000001,8.4999992 0,14.000001 11.0000001,0 0,-14.000001 -11.0000001,0 z m 1,2.000001
              4.0000002,0 0,2 -4.0000002,0 0,-2 z m 5.0000001,0 4,0 0,2 -4,0 0,-2 z m -5.0000001,3 4.0000002,
              0 0,2 -4.0000002,0 0,-2 z m 5.0000001,0 4,0 0,2 -4,0 0,-2 z m -5.0000001,3 4.0000002,0 0,2
              -4.0000002,0 0,-2 z m 5.0000001,0 4,0 0,2 -4,0 0,-2 z m -5.0000001,3 4.0000002,0 0,2
              -4.0000002,0 0,-2 z m 5.0000001,0 4,0 0,2 -4,0 0,-2 z"/>
        <svg:path class="stroked" d="m 21.639621,27.146059 c 0,-0.08319 -0.0294,-0.161372 -0.08788,-0.219854
              l -0.444708,-0.444708 c -0.05848,-0.05848 -0.136977,-0.08788 -0.219852,-0.08788 -0.08288,0
              -0.161371,0.0294 -0.219853,0.08788 l -0.923506,0.923506 0,-2.453093 c 0,-0.171065
              -0.141669,-0.312735 -0.312735,-0.312735 l -0.62547,0 c -0.171065,0 -0.312735,0.14167
              -0.312735,0.312735 l 0,2.453093 -0.923506,-0.923507 c -0.05848,-0.05848 -0.136978,-0.09288
              -0.219852,-0.09288 -0.08288,0 -0.161372,0.03409 -0.219853,0.09288 l -0.444709,0.444709
              c -0.05848,0.05848 -0.08788,0.136979 -0.08788,0.219853 0,0.08288 0.0294,0.161371
              0.08788,0.219852 l 2.213538,2.213538 c 0.05848,0.05848 0.136978,0.08788 0.219852,0.08788
              0.08288,0 0.161371,-0.0294 0.219853,-0.08788 l 2.213537,-2.213538 c 0.05848,-0.05848
              0.08788,-0.136977 0.08788,-0.219852 z"/>
        <svg:path class="stroked" d="m 22.871172,27.153251 c 0,2.071869 -1.680951,3.75282
              -3.75282,3.75282 -2.071869,0 -3.752819,-1.680951 -3.752819,-3.75282 0,-2.071869
              1.68095,-3.752819 3.752819,-3.752819 2.071869,0 3.75282,1.68095 3.75282,3.752819 z"/>
        <text y="11" style="stroke:black;font-size:16;stroke-width:2;fill:#000" x="24">XLS</text>
      </svg>
    </a>
  </div>
  <div class="col-xs-1"></div>
</div>
